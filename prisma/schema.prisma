// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// datasource db {
//   provider  = "postgresql"
//   url       = env("DATABASE_URL")
//   directUrl = env("DIRECT_URL")
// }
datasource db {
  provider = "sqlite"
  url      = "file:prisma/fp.db"
}

generator client {
  provider = "prisma-client-js"
}

model ShootEvent {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  eventName     String
  eventState    String
  eventTeams    Team[]
  eventRounds   Round[]
  eventStations Station[]
}

model Team {
  id Int @id @default(autoincrement())

  event   ShootEvent @relation(fields: [eventId], references: [id])
  eventId Int

  teamName       String
  teamShooter1   String
  teamShooter2   String
  teamState      String
  teamRounds     Round[]
  teamStations   Station[]
  teamTotal      Int?      @default(0)
  teamShotsFired Int?      @default(0)
}

model Round {
  id Int @id @default(autoincrement())

  event   ShootEvent @relation(fields: [eventId], references: [id])
  eventId Int
  team    Team       @relation(fields: [teamId], references: [id])
  teamId  Int

  roundName         String
  roundIndex        Int
  roundStationCount Int
  roundStations     Station[]
  roundAmmo         String
  roundClays        String
  roundState        String
}

model Station {
  id Int @id @default(autoincrement())

  event   ShootEvent @relation(fields: [eventId], references: [id])
  eventId Int
  team    Team       @relation(fields: [teamId], references: [id])
  teamId  Int
  round   Round      @relation(fields: [roundId], references: [id])
  roundId Int

  stationIndex Int
  stationAmmo  String
  stationClays String
  stationState String
}
